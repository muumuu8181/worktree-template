<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–3Då®‡å®™æ¢æŸ»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(ellipse at center, #0a0a1a 0%, #000000 70%, #000000 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow: hidden;
            position: relative;
        }

        .stars-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 30px;
            border-radius: 20px;
            border: 2px solid #00bfff;
            box-shadow: 0 0 30px rgba(0, 191, 255, 0.3);
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
            background: linear-gradient(45deg, #00bfff, #ff6b9d, #c44bd4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: headerGlow 3s ease-in-out infinite alternate;
        }

        @keyframes headerGlow {
            from { filter: drop-shadow(0 0 10px rgba(0, 191, 255, 0.5)); }
            to { filter: drop-shadow(0 0 25px rgba(255, 107, 157, 0.8)); }
        }

        .space-canvas {
            flex: 1;
            position: relative;
            background: radial-gradient(circle, rgba(0, 191, 255, 0.1) 0%, transparent 70%);
        }

        .control-panel {
            position: absolute;
            top: 100px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(0, 191, 255, 0.3);
            backdrop-filter: blur(10px);
            max-width: 300px;
            z-index: 50;
        }

        .control-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 191, 255, 0.2);
        }

        .control-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .control-section h3 {
            color: #00bfff;
            margin-bottom: 10px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .control-row label {
            color: #ccc;
            font-size: 0.9em;
        }

        .slider {
            width: 120px;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(90deg, #333, #00bfff);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00bfff, #ff6b9d);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.5);
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00bfff, #0080ff);
            color: white;
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #ff6b9d, #c44bd4);
            color: white;
            box-shadow: 0 0 15px rgba(255, 107, 157, 0.3);
        }

        .btn-success {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.2);
        }

        .planet {
            position: absolute;
            border-radius: 50%;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(90deg); }
            50% { transform: translateY(0px) rotate(180deg); }
            75% { transform: translateY(-5px) rotate(270deg); }
        }

        .planet:hover {
            transform: scale(1.2);
            filter: brightness(1.3);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
        }

        .planet-sun {
            background: radial-gradient(circle, #ffeb3b 0%, #ff9800 50%, #f44336 100%);
            animation: sunPulse 4s ease-in-out infinite;
        }

        @keyframes sunPulse {
            0%, 100% { box-shadow: 0 0 30px #ffeb3b; }
            50% { box-shadow: 0 0 60px #ff9800, 0 0 100px #f44336; }
        }

        .planet-mercury {
            background: radial-gradient(circle, #8c7853 0%, #a68b5b 100%);
        }

        .planet-venus {
            background: radial-gradient(circle, #ffc649 0%, #ff8a00 100%);
        }

        .planet-earth {
            background: radial-gradient(circle, #4fc3f7 0%, #29b6f6 30%, #0d47a1 100%);
            position: relative;
        }

        .planet-earth::after {
            content: '';
            position: absolute;
            top: 20%;
            left: 30%;
            width: 40%;
            height: 40%;
            background: #4caf50;
            border-radius: 50%;
            opacity: 0.8;
        }

        .planet-mars {
            background: radial-gradient(circle, #f44336 0%, #d32f2f 100%);
        }

        .planet-jupiter {
            background: radial-gradient(circle, #ff9800 0%, #f57c00 50%, #d84315 100%);
        }

        .planet-saturn {
            background: radial-gradient(circle, #ffeb3b 0%, #fbc02d 100%);
            position: relative;
        }

        .planet-saturn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }

        .planet-uranus {
            background: radial-gradient(circle, #00bcd4 0%, #0097a7 100%);
        }

        .planet-neptune {
            background: radial-gradient(circle, #3f51b5 0%, #1a237e 100%);
        }

        .spacecraft {
            position: absolute;
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #ffffff, #e0e0e0);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            transition: all 0.3s ease;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
        }

        .spacecraft.moving {
            animation: spacecraftMove 2s ease-in-out;
        }

        @keyframes spacecraftMove {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .info-panel {
            position: absolute;
            top: 100px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(0, 191, 255, 0.3);
            backdrop-filter: blur(10px);
            max-width: 350px;
            z-index: 50;
        }

        .planet-info {
            display: none;
        }

        .planet-info.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .planet-info h3 {
            color: #00bfff;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .info-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-stat:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #ccc;
            font-size: 0.9em;
        }

        .stat-value {
            color: #fff;
            font-weight: bold;
        }

        .mission-panel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(0, 191, 255, 0.3);
            backdrop-filter: blur(10px);
            z-index: 50;
            text-align: center;
            min-width: 400px;
        }

        .mission-status {
            margin-bottom: 15px;
        }

        .mission-title {
            color: #00bfff;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .mission-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00bfff, #ff6b9d);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .mission-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .asteroid {
            position: absolute;
            background: radial-gradient(circle, #757575 0%, #424242 100%);
            border-radius: 50%;
            animation: asteroidSpin 8s linear infinite;
        }

        @keyframes asteroidSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nebula {
            position: absolute;
            background: radial-gradient(circle, rgba(255, 107, 157, 0.3) 0%, rgba(196, 75, 212, 0.2) 50%, transparent 100%);
            border-radius: 50%;
            animation: nebulaPulse 6s ease-in-out infinite;
        }

        @keyframes nebulaPulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }

        .comet {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffffff;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffffff;
        }

        .comet::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 30px;
            height: 2px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.8), transparent);
            transform: translateY(-50%);
        }

        .explosion {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #ffeb3b 0%, #ff9800 50%, transparent 100%);
            border-radius: 50%;
            animation: explode 0.5s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% { opacity: 1; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(2); }
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5em;
            }

            .control-panel,
            .info-panel {
                position: relative;
                max-width: none;
                margin: 10px;
                top: auto;
                left: auto;
                right: auto;
            }

            .mission-panel {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                margin: 10px;
                min-width: auto;
            }

            .space-canvas {
                height: 60vh;
            }
        }

        /* è»Œé“ç·š */
        .orbit {
            position: absolute;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            pointer-events: none;
            animation: orbitRotate 20s linear infinite;
        }

        @keyframes orbitRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warp-effect {
            animation: warp 1s ease-in-out;
        }

        @keyframes warp {
            0% { transform: scale(1); filter: blur(0px); }
            50% { transform: scale(0.1); filter: blur(5px); }
            100% { transform: scale(1); filter: blur(0px); }
        }
    </style>
</head>
<body>
    <div class="stars-bg" id="starsBg"></div>
    
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–3Då®‡å®™æ¢æŸ»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
            <p>å¤ªé™½ç³»ã‚’æ¢ç´¢ã—ã€æƒ‘æ˜Ÿé–“ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã‚ˆã†</p>
        </div>

        <div class="space-canvas" id="spaceCanvas">
            <!-- å¤ªé™½ç³»ã¨å®‡å®™èˆ¹ãŒã“ã“ã«å‹•çš„ç”Ÿæˆã•ã‚Œã‚‹ -->
        </div>

        <div class="control-panel">
            <div class="control-section">
                <h3>ğŸ›ï¸ è¡¨ç¤ºè¨­å®š</h3>
                <div class="control-row">
                    <label>ã‚ºãƒ¼ãƒ </label>
                    <input type="range" class="slider" id="zoomSlider" min="0.5" max="2" step="0.1" value="1">
                </div>
                <div class="control-row">
                    <label>å›è»¢é€Ÿåº¦</label>
                    <input type="range" class="slider" id="speedSlider" min="0" max="5" step="0.5" value="1">
                </div>
                <div class="control-row">
                    <label>è»Œé“è¡¨ç¤º</label>
                    <input type="checkbox" id="orbitToggle" checked>
                </div>
            </div>

            <div class="control-section">
                <h3>ğŸš€ å®‡å®™èˆ¹åˆ¶å¾¡</h3>
                <button class="btn btn-primary" onclick="launchSpacecraft()" style="width: 100%; margin-bottom: 10px;">
                    ğŸš€ å®‡å®™èˆ¹ç™ºå°„
                </button>
                <button class="btn btn-secondary" onclick="enableWarpDrive()" style="width: 100%; margin-bottom: 10px;">
                    âš¡ ãƒ¯ãƒ¼ãƒ—ãƒ‰ãƒ©ã‚¤ãƒ–
                </button>
                <button class="btn btn-success" onclick="randomMission()" style="width: 100%;">
                    ğŸ¯ ãƒ©ãƒ³ãƒ€ãƒ ãƒŸãƒƒã‚·ãƒ§ãƒ³
                </button>
            </div>

            <div class="control-section">
                <h3>ğŸŒŒ ç’°å¢ƒè¨­å®š</h3>
                <button class="btn btn-primary" onclick="toggleAsteroids()" style="width: 100%; margin-bottom: 10px;">
                    ğŸŒ‘ å°æƒ‘æ˜Ÿå¸¯åˆ‡æ›¿
                </button>
                <button class="btn btn-secondary" onclick="addNebula()" style="width: 100%; margin-bottom: 10px;">
                    ğŸŒˆ æ˜Ÿé›²è¿½åŠ 
                </button>
                <button class="btn btn-success" onclick="addComet()" style="width: 100%;">
                    â˜„ï¸ å½—æ˜Ÿè¿½åŠ 
                </button>
            </div>
        </div>

        <div class="info-panel">
            <div id="defaultInfo" class="planet-info active">
                <h3>ğŸŒŒ å¤ªé™½ç³»æ¢æŸ»</h3>
                <div class="info-stat">
                    <span class="stat-label">ç¾åœ¨ä½ç½®</span>
                    <span class="stat-value">åœ°çƒè»Œé“</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">ç‡ƒæ–™</span>
                    <span class="stat-value">100%</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">é€Ÿåº¦</span>
                    <span class="stat-value">11.2 km/s</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">ç™ºè¦‹æ¸ˆã¿å¤©ä½“</span>
                    <span class="stat-value" id="discoveredCount">0/9</span>
                </div>
                <p style="margin-top: 15px; color: #ccc; font-size: 0.9em;">
                    æƒ‘æ˜Ÿã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚å®‡å®™èˆ¹ã‚’ç™ºå°„ã—ã¦æ¢æŸ»ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ã€‚
                </p>
            </div>

            <!-- å„æƒ‘æ˜Ÿã®æƒ…å ±ãƒ‘ãƒãƒ« -->
            <div id="sunInfo" class="planet-info">
                <h3>â˜€ï¸ å¤ªé™½</h3>
                <div class="info-stat">
                    <span class="stat-label">åˆ†é¡</span>
                    <span class="stat-value">Gå‹ä¸»ç³»åˆ—æ˜Ÿ</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">ç›´å¾„</span>
                    <span class="stat-value">1,392,700 km</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">è¡¨é¢æ¸©åº¦</span>
                    <span class="stat-value">5,778 K</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å¹´é½¢</span>
                    <span class="stat-value">46å„„å¹´</span>
                </div>
            </div>

            <div id="earthInfo" class="planet-info">
                <h3>ğŸŒ åœ°çƒ</h3>
                <div class="info-stat">
                    <span class="stat-label">ç›´å¾„</span>
                    <span class="stat-value">12,756 km</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å…¬è»¢å‘¨æœŸ</span>
                    <span class="stat-value">365.25 æ—¥</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å¹³å‡æ°—æ¸©</span>
                    <span class="stat-value">15Â°C</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å¤§æ°—</span>
                    <span class="stat-value">78% Nâ‚‚, 21% Oâ‚‚</span>
                </div>
            </div>

            <div id="marsInfo" class="planet-info">
                <h3>ğŸ”´ ç«æ˜Ÿ</h3>
                <div class="info-stat">
                    <span class="stat-label">ç›´å¾„</span>
                    <span class="stat-value">6,792 km</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å…¬è»¢å‘¨æœŸ</span>
                    <span class="stat-value">687 æ—¥</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å¹³å‡æ°—æ¸©</span>
                    <span class="stat-value">-80Â°C</span>
                </div>
                <div class="info-stat">
                    <span class="stat-label">å¤§æ°—</span>
                    <span class="stat-value">95% COâ‚‚</span>
                </div>
            </div>
        </div>

        <div class="mission-panel">
            <div class="mission-status">
                <div class="mission-title" id="missionTitle">ãƒŸãƒƒã‚·ãƒ§ãƒ³å¾…æ©Ÿä¸­</div>
                <div class="mission-progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div id="missionDescription">å®‡å®™èˆ¹ã‚’ç™ºå°„ã—ã¦ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</div>
            </div>
            <div class="mission-controls">
                <button class="btn btn-primary" onclick="startMission()">ğŸ“¡ ãƒŸãƒƒã‚·ãƒ§ãƒ³é–‹å§‹</button>
                <button class="btn btn-secondary" onclick="abortMission()">ğŸš« ãƒŸãƒƒã‚·ãƒ§ãƒ³ä¸­æ­¢</button>
                <button class="btn btn-success" onclick="completeMission()">âœ… ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº†</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let solarSystem = [];
        let spacecraft = null;
        let currentMission = null;
        let discoveredPlanets = new Set();
        let animationSpeed = 1;
        let zoomLevel = 1;
        let showOrbits = true;
        let asteroidBelt = [];
        let nebulae = [];
        let comets = [];

        // æƒ‘æ˜Ÿãƒ‡ãƒ¼ã‚¿
        const planetData = [
            { name: 'sun', displayName: 'å¤ªé™½', size: 60, distance: 0, speed: 0, color: 'planet-sun', info: 'sunInfo' },
            { name: 'mercury', displayName: 'æ°´æ˜Ÿ', size: 8, distance: 80, speed: 4.7, color: 'planet-mercury', info: 'mercuryInfo' },
            { name: 'venus', displayName: 'é‡‘æ˜Ÿ', size: 12, distance: 120, speed: 3.5, color: 'planet-venus', info: 'venusInfo' },
            { name: 'earth', displayName: 'åœ°çƒ', size: 14, distance: 160, speed: 3.0, color: 'planet-earth', info: 'earthInfo' },
            { name: 'mars', displayName: 'ç«æ˜Ÿ', size: 10, distance: 200, speed: 2.4, color: 'planet-mars', info: 'marsInfo' },
            { name: 'jupiter', displayName: 'æœ¨æ˜Ÿ', size: 35, distance: 280, speed: 1.3, color: 'planet-jupiter', info: 'jupiterInfo' },
            { name: 'saturn', displayName: 'åœŸæ˜Ÿ', size: 30, distance: 360, speed: 1.0, color: 'planet-saturn', info: 'saturnInfo' },
            { name: 'uranus', displayName: 'å¤©ç‹æ˜Ÿ', size: 18, distance: 440, speed: 0.7, color: 'planet-uranus', info: 'uranusInfo' },
            { name: 'neptune', displayName: 'æµ·ç‹æ˜Ÿ', size: 16, distance: 520, speed: 0.5, color: 'planet-neptune', info: 'neptuneInfo' }
        ];

        // ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿
        const missions = [
            { name: 'ç«æ˜Ÿæ¢æŸ»ãƒŸãƒƒã‚·ãƒ§ãƒ³', target: 'mars', duration: 5000, description: 'ç«æ˜Ÿè¡¨é¢ã®åœ°è³ªèª¿æŸ»ã‚’å®Ÿæ–½' },
            { name: 'æœ¨æ˜Ÿå¤§æ°—è¦³æ¸¬', target: 'jupiter', duration: 7000, description: 'æœ¨æ˜Ÿã®å¤§æ°—çµ„æˆã‚’åˆ†æ' },
            { name: 'åœŸæ˜Ÿãƒªãƒ³ã‚°èª¿æŸ»', target: 'saturn', duration: 6000, description: 'åœŸæ˜Ÿã®ç’°ã®æ§‹é€ ã‚’è©³ç´°è¦³æ¸¬' },
            { name: 'å°æƒ‘æ˜Ÿå¸¯æ¢æŸ»', target: 'asteroid', duration: 4000, description: 'å°æƒ‘æ˜Ÿã®æˆåˆ†åˆ†æ' },
            { name: 'å½—æ˜Ÿè¿‘æ¥è¦³æ¸¬', target: 'comet', duration: 3000, description: 'å½—æ˜Ÿã®æ ¸ã®çµ„æˆèª¿æŸ»' }
        ];

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeStars();
            initializeSolarSystem();
            initializeSpacecraft();
            startAnimation();
            setupEventListeners();
        });

        function initializeStars() {
            const starsBg = document.getElementById('starsBg');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = (Math.random() * 3 + 1) + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsBg.appendChild(star);
            }
        }

        function initializeSolarSystem() {
            const canvas = document.getElementById('spaceCanvas');
            const centerX = canvas.offsetWidth / 2;
            const centerY = canvas.offsetHeight / 2;

            planetData.forEach((planet, index) => {
                // è»Œé“ç·šã‚’ä½œæˆ
                if (planet.distance > 0 && showOrbits) {
                    const orbit = document.createElement('div');
                    orbit.className = 'orbit';
                    orbit.style.width = orbit.style.height = (planet.distance * 2 * zoomLevel) + 'px';
                    orbit.style.left = (centerX - planet.distance * zoomLevel) + 'px';
                    orbit.style.top = (centerY - planet.distance * zoomLevel) + 'px';
                    orbit.id = `orbit-${planet.name}`;
                    canvas.appendChild(orbit);
                }

                // æƒ‘æ˜Ÿã‚’ä½œæˆ
                const planetElement = document.createElement('div');
                planetElement.className = `planet ${planet.color} fade-in`;
                planetElement.style.width = planetElement.style.height = (planet.size * zoomLevel) + 'px';
                planetElement.style.animationDelay = (index * 0.2) + 's';
                planetElement.id = planet.name;
                
                // åˆæœŸä½ç½®è¨­å®š
                const angle = Math.random() * Math.PI * 2;
                const x = centerX + Math.cos(angle) * planet.distance * zoomLevel - (planet.size * zoomLevel) / 2;
                const y = centerY + Math.sin(angle) * planet.distance * zoomLevel - (planet.size * zoomLevel) / 2;
                
                planetElement.style.left = x + 'px';
                planetElement.style.top = y + 'px';
                
                planetElement.onclick = () => selectPlanet(planet);
                planetElement.dataset.angle = angle;
                planetElement.dataset.planet = JSON.stringify(planet);
                
                canvas.appendChild(planetElement);
                solarSystem.push(planetElement);
            });
        }

        function initializeSpacecraft() {
            const canvas = document.getElementById('spaceCanvas');
            spacecraft = document.createElement('div');
            spacecraft.className = 'spacecraft';
            spacecraft.style.left = (canvas.offsetWidth / 2 - 15) + 'px';
            spacecraft.style.top = (canvas.offsetHeight / 2 + 80) + 'px'; // åœ°çƒä»˜è¿‘
            canvas.appendChild(spacecraft);
        }

        function startAnimation() {
            setInterval(() => {
                updatePlanetPositions();
                updateAsteroids();
                updateNebulae();
                updateComets();
            }, 50);
        }

        function updatePlanetPositions() {
            const canvas = document.getElementById('spaceCanvas');
            const centerX = canvas.offsetWidth / 2;
            const centerY = canvas.offsetHeight / 2;

            solarSystem.forEach(planetElement => {
                const planet = JSON.parse(planetElement.dataset.planet);
                if (planet.distance === 0) return; // å¤ªé™½ã¯å‹•ã‹ãªã„

                let currentAngle = parseFloat(planetElement.dataset.angle);
                currentAngle += (planet.speed * animationSpeed) * 0.01;
                planetElement.dataset.angle = currentAngle;

                const x = centerX + Math.cos(currentAngle) * planet.distance * zoomLevel - (planet.size * zoomLevel) / 2;
                const y = centerY + Math.sin(currentAngle) * planet.distance * zoomLevel - (planet.size * zoomLevel) / 2;

                planetElement.style.left = x + 'px';
                planetElement.style.top = y + 'px';
            });
        }

        function selectPlanet(planet) {
            // å…¨ã¦ã®æƒ…å ±ãƒ‘ãƒãƒ«ã‚’éè¡¨ç¤º
            document.querySelectorAll('.planet-info').forEach(panel => {
                panel.classList.remove('active');
            });

            // é¸æŠã—ãŸæƒ‘æ˜Ÿã®æƒ…å ±ã‚’è¡¨ç¤º
            const infoPanel = document.getElementById(planet.info) || document.getElementById('defaultInfo');
            infoPanel.classList.add('active');

            // ç™ºè¦‹æ¸ˆã¿æƒ‘æ˜Ÿã«è¿½åŠ 
            discoveredPlanets.add(planet.name);
            updateDiscoveredCount();

            // å®‡å®™èˆ¹ã‚’æƒ‘æ˜Ÿã«ç§»å‹•
            moveSpacecraftToPlanet(planet.name);
            
            showNotification(`${planet.displayName}ã‚’é¸æŠã—ã¾ã—ãŸ`, 'success');
        }

        function moveSpacecraftToPlanet(planetName) {
            const planetElement = document.getElementById(planetName);
            if (!planetElement) return;

            spacecraft.classList.add('moving');
            
            setTimeout(() => {
                const planetRect = planetElement.getBoundingClientRect();
                const canvasRect = document.getElementById('spaceCanvas').getBoundingClientRect();
                
                spacecraft.style.left = (planetRect.left - canvasRect.left + planetRect.width / 2 - 15) + 'px';
                spacecraft.style.top = (planetRect.top - canvasRect.top + planetRect.height + 20) + 'px';
                
                setTimeout(() => {
                    spacecraft.classList.remove('moving');
                }, 300);
            }, 100);
        }

        function launchSpacecraft() {
            spacecraft.classList.add('moving');
            showNotification('å®‡å®™èˆ¹ã‚’ç™ºå°„ã—ã¾ã—ãŸï¼', 'success');
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªæ–¹å‘ã«ç§»å‹•
            const canvas = document.getElementById('spaceCanvas');
            const randomX = Math.random() * (canvas.offsetWidth - 60) + 30;
            const randomY = Math.random() * (canvas.offsetHeight - 60) + 30;
            
            setTimeout(() => {
                spacecraft.style.left = randomX + 'px';
                spacecraft.style.top = randomY + 'px';
            }, 500);
            
            setTimeout(() => {
                spacecraft.classList.remove('moving');
            }, 2000);
        }

        function enableWarpDrive() {
            document.getElementById('spaceCanvas').classList.add('warp-effect');
            showNotification('ãƒ¯ãƒ¼ãƒ—ãƒ‰ãƒ©ã‚¤ãƒ–é–‹å§‹ï¼', 'info');
            
            setTimeout(() => {
                document.getElementById('spaceCanvas').classList.remove('warp-effect');
                launchSpacecraft();
                showNotification('ãƒ¯ãƒ¼ãƒ—å®Œäº†', 'success');
            }, 1000);
        }

        function randomMission() {
            const mission = missions[Math.floor(Math.random() * missions.length)];
            currentMission = mission;
            
            document.getElementById('missionTitle').textContent = mission.name;
            document.getElementById('missionDescription').textContent = mission.description;
            
            showNotification(`æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³: ${mission.name}`, 'info');
        }

        function startMission() {
            if (!currentMission) {
                randomMission();
            }
            
            const progressBar = document.getElementById('progressBar');
            let progress = 0;
            
            const interval = setInterval(() => {
                progress += 2;
                progressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    showNotification('ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº†ï¼', 'success');
                    currentMission = null;
                    document.getElementById('missionTitle').textContent = 'ãƒŸãƒƒã‚·ãƒ§ãƒ³å¾…æ©Ÿä¸­';
                    document.getElementById('missionDescription').textContent = 'æ–°ã—ã„ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„';
                    progressBar.style.width = '0%';
                }
            }, currentMission ? currentMission.duration / 50 : 100);
        }

        function abortMission() {
            currentMission = null;
            document.getElementById('missionTitle').textContent = 'ãƒŸãƒƒã‚·ãƒ§ãƒ³ä¸­æ­¢';
            document.getElementById('missionDescription').textContent = 'ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒä¸­æ­¢ã•ã‚Œã¾ã—ãŸ';
            document.getElementById('progressBar').style.width = '0%';
            showNotification('ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ä¸­æ­¢ã—ã¾ã—ãŸ', 'warning');
        }

        function completeMission() {
            if (currentMission) {
                document.getElementById('progressBar').style.width = '100%';
                showNotification(`${currentMission.name} å®Œäº†ï¼`, 'success');
                setTimeout(() => {
                    currentMission = null;
                    document.getElementById('missionTitle').textContent = 'ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº†';
                    document.getElementById('missionDescription').textContent = 'æ¬¡ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„';
                    document.getElementById('progressBar').style.width = '0%';
                }, 1000);
            }
        }

        function toggleAsteroids() {
            if (asteroidBelt.length === 0) {
                createAsteroidBelt();
                showNotification('å°æƒ‘æ˜Ÿå¸¯ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ', 'info');
            } else {
                asteroidBelt.forEach(asteroid => asteroid.remove());
                asteroidBelt = [];
                showNotification('å°æƒ‘æ˜Ÿå¸¯ã‚’éè¡¨ç¤ºã«ã—ã¾ã—ãŸ', 'info');
            }
        }

        function createAsteroidBelt() {
            const canvas = document.getElementById('spaceCanvas');
            const centerX = canvas.offsetWidth / 2;
            const centerY = canvas.offsetHeight / 2;
            
            for (let i = 0; i < 30; i++) {
                const asteroid = document.createElement('div');
                asteroid.className = 'asteroid';
                const size = Math.random() * 8 + 3;
                asteroid.style.width = asteroid.style.height = size + 'px';
                
                const distance = 240 + Math.random() * 40; // ç«æ˜Ÿã¨æœ¨æ˜Ÿã®é–“
                const angle = Math.random() * Math.PI * 2;
                
                asteroid.style.left = (centerX + Math.cos(angle) * distance - size / 2) + 'px';
                asteroid.style.top = (centerY + Math.sin(angle) * distance - size / 2) + 'px';
                asteroid.style.animationDelay = Math.random() * 8 + 's';
                
                canvas.appendChild(asteroid);
                asteroidBelt.push(asteroid);
            }
        }

        function addNebula() {
            const canvas = document.getElementById('spaceCanvas');
            const nebula = document.createElement('div');
            nebula.className = 'nebula';
            
            const size = Math.random() * 200 + 100;
            nebula.style.width = nebula.style.height = size + 'px';
            nebula.style.left = Math.random() * (canvas.offsetWidth - size) + 'px';
            nebula.style.top = Math.random() * (canvas.offsetHeight - size) + 'px';
            nebula.style.animationDelay = Math.random() * 6 + 's';
            
            canvas.appendChild(nebula);
            nebulae.push(nebula);
            
            setTimeout(() => {
                nebula.remove();
                const index = nebulae.indexOf(nebula);
                if (index > -1) nebulae.splice(index, 1);
            }, 10000);
            
            showNotification('æ˜Ÿé›²ãŒå‡ºç¾ã—ã¾ã—ãŸ', 'info');
        }

        function addComet() {
            const canvas = document.getElementById('spaceCanvas');
            const comet = document.createElement('div');
            comet.className = 'comet';
            
            // ç”»é¢å¤–ã‹ã‚‰é–‹å§‹
            comet.style.left = '-10px';
            comet.style.top = Math.random() * canvas.offsetHeight + 'px';
            
            canvas.appendChild(comet);
            comets.push(comet);
            
            // å½—æ˜Ÿã‚’ç§»å‹•
            let position = -10;
            const interval = setInterval(() => {
                position += 3;
                comet.style.left = position + 'px';
                
                if (position > canvas.offsetWidth + 50) {
                    clearInterval(interval);
                    comet.remove();
                    const index = comets.indexOf(comet);
                    if (index > -1) comets.splice(index, 1);
                }
            }, 50);
            
            showNotification('å½—æ˜ŸãŒæ¥è¿‘ä¸­ã§ã™', 'info');
        }

        function updateAsteroids() {
            // å°æƒ‘æ˜Ÿã®è»Œé“æ›´æ–°
            asteroidBelt.forEach(asteroid => {
                const currentRotation = asteroid.style.transform || 'rotate(0deg)';
                const currentAngle = parseFloat(currentRotation.match(/(-?\d+\.?\d*)/)[0]);
                asteroid.style.transform = `rotate(${currentAngle + animationSpeed}deg)`;
            });
        }

        function updateNebulae() {
            // æ˜Ÿé›²ã®ãƒ‘ãƒ«ã‚¹æ›´æ–°
            nebulae.forEach(nebula => {
                // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§å‡¦ç†æ¸ˆã¿
            });
        }

        function updateComets() {
            // å½—æ˜Ÿã®ç§»å‹•ã¯ addComet() ã§å‡¦ç†æ¸ˆã¿
        }

        function updateDiscoveredCount() {
            document.getElementById('discoveredCount').textContent = `${discoveredPlanets.size}/9`;
        }

        function setupEventListeners() {
            // ã‚ºãƒ¼ãƒ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
            document.getElementById('zoomSlider').addEventListener('input', function() {
                zoomLevel = parseFloat(this.value);
                updateSolarSystemScale();
            });

            // é€Ÿåº¦ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
            document.getElementById('speedSlider').addEventListener('input', function() {
                animationSpeed = parseFloat(this.value);
            });

            // è»Œé“è¡¨ç¤ºåˆ‡æ›¿
            document.getElementById('orbitToggle').addEventListener('change', function() {
                showOrbits = this.checked;
                toggleOrbits();
            });

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
            document.addEventListener('keydown', function(e) {
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        launchSpacecraft();
                        break;
                    case 'w':
                        enableWarpDrive();
                        break;
                    case 'm':
                        randomMission();
                        break;
                    case 'a':
                        toggleAsteroids();
                        break;
                    case 'n':
                        addNebula();
                        break;
                    case 'c':
                        addComet();
                        break;
                }
            });
        }

        function updateSolarSystemScale() {
            // å…¨ã¦ã®æƒ‘æ˜Ÿã¨è»Œé“ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚’æ›´æ–°
            document.querySelectorAll('.planet').forEach(planet => {
                const planetData = JSON.parse(planet.dataset.planet);
                planet.style.width = planet.style.height = (planetData.size * zoomLevel) + 'px';
            });

            document.querySelectorAll('.orbit').forEach(orbit => {
                const planetName = orbit.id.replace('orbit-', '');
                const planet = planetData.find(p => p.name === planetName);
                if (planet) {
                    orbit.style.width = orbit.style.height = (planet.distance * 2 * zoomLevel) + 'px';
                    const canvas = document.getElementById('spaceCanvas');
                    const centerX = canvas.offsetWidth / 2;
                    const centerY = canvas.offsetHeight / 2;
                    orbit.style.left = (centerX - planet.distance * zoomLevel) + 'px';
                    orbit.style.top = (centerY - planet.distance * zoomLevel) + 'px';
                }
            });
        }

        function toggleOrbits() {
            document.querySelectorAll('.orbit').forEach(orbit => {
                orbit.style.display = showOrbits ? 'block' : 'none';
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'linear-gradient(45deg, #4ecdc4, #44a08d)' : 
                           type === 'warning' ? 'linear-gradient(45deg, #ff9800, #f57c00)' : 
                           'linear-gradient(45deg, #00bfff, #0080ff)'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 0 20px rgba(0, 191, 255, 0.3);
                z-index: 1000;
                animation: slideInRight 0.3s ease;
                max-width: 300px;
                font-weight: bold;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•çš„ã«è¿½åŠ 
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>